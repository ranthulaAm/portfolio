<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranthula's Portfolio</title>
    <link rel="icon" type="image/png" href="img/logo.png">
    
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Righteous&family=Lato:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- Core & Reset --- */
        html { overscroll-behavior-y: contain; }
        img { pointer-events: none; user-select: none; }
        
        :root {
            --bg-dark: #121212;
            --bg-light: #1E1E1E;
            --text-light: #E0E0E0;
            --accent-purple: #4c00ff;
            --accent-magenta: #ff007f;
            --accent-orange: #ff8c00;
            --whatsapp-green-light: #25D366;
            --whatsapp-green-dark: #128C7E;
            --gradient-opacity: 0.3;
        }

        body {
            background-color: var(--bg-dark);
            color: var(--text-light);
            font-family: 'Lato', sans-serif;
            position: relative;
        }

        /* --- Animated Background --- */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -2;
            background: linear-gradient(135deg, var(--accent-purple), var(--accent-magenta), var(--accent-orange));
            background-size: 400% 400%;
            animation: gradient-animation 15s ease infinite;
            opacity: var(--gradient-opacity);
            transition: opacity 4s ease-in-out;
        }

        @keyframes gradient-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* --- Typography & Utilities --- */
        .font-righteous { font-family: 'Righteous', cursive; }
        .section-canvas {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; transition: opacity 4s ease-in-out;
        }
        
        /* --- Performance Optimizations (GPU) --- */
        .content-section, .glass-effect, .product-card, img {
            will-change: transform, opacity;
            transform: translateZ(0);
        }
        
        .content-section {
            position: relative; z-index: 1;
            background-color: var(--bg-dark);
            overflow: hidden;
        }
        
        .hero-section { background-color: transparent; }

        .glass-effect {
            background: rgba(30, 30, 30, 0.5);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative; z-index: 1;
        }

        /* --- Scroll Reveal Animation --- */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s cubic-bezier(0.645, 0.045, 0.355, 1), transform 0.8s cubic-bezier(0.645, 0.045, 0.355, 1);
        }
        .scroll-reveal.is-visible { opacity: 1; transform: translateY(0); }

        /* --- Navigation --- */
        .nav-link::after {
            content: ''; display: block; width: 0; height: 2px;
            background: var(--accent-magenta); transition: width .3s;
        }
        .nav-link:hover::after { width: 100%; }

        .header-logo-link img {
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1), filter 0.4s ease;
            filter: drop-shadow(0 0 8px rgba(0, 0, 0, 0.6));
        }
        .header-logo-link:hover img {
            transform: scale(1.08);
            filter: drop-shadow(0 0 15px rgba(255, 255, 255, 0.25)) brightness(1.1);
        }

        /* --- Cards & 3D Effects --- */
        .product-card-container, .contact-image-container { perspective: 1000px; }
        
        .product-card {
            background-color: var(--bg-light);
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1), box-shadow 0.6s cubic-bezier(0.23, 1, 0.32, 1);
        }
        
        .product-image-wrapper {
            background-color: #000;
            transition: background 0.5s ease-in-out;
            aspect-ratio: 1 / 1;
            position: relative; 
        }

        /* --- Buttons --- */
        .glowing-button {
            position: relative;
            background: linear-gradient(90deg, var(--whatsapp-green-dark), var(--whatsapp-green-light));
            animation: whatsapp-glow 2s ease-in-out infinite;
        }
        @keyframes whatsapp-glow {
            0%, 100% { box-shadow: 0 0 5px var(--whatsapp-green-light), 0 0 15px var(--whatsapp-green-light), 0 0 25px var(--whatsapp-green-dark); }
            50% { box-shadow: 0 0 10px var(--whatsapp-green-light), 0 0 25px var(--whatsapp-green-light), 0 0 40px var(--whatsapp-green-dark); }
        }

        .story-button {
            background: linear-gradient(90deg, var(--accent-purple), var(--accent-magenta));
            animation: glow-default 2s ease-in-out infinite;
        }
        @keyframes glow-default {
            0%, 100% { box-shadow: 0 0 5px var(--accent-magenta), 0 0 15px var(--accent-magenta), 0 0 25px var(--accent-purple); }
            50% { box-shadow: 0 0 10px var(--accent-magenta), 0 0 25px var(--accent-magenta), 0 0 40px var(--accent-purple); }
        }

        /* --- Hero Text Animations --- */
        .animation-container {
            text-align: center; min-height: 300px;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.5s ease-in-out;
        }
        .line {
            position: relative; display: block;
            font-family: 'Righteous', cursive;
            font-size: 2.5rem; line-height: 1.3;
            text-transform: uppercase; letter-spacing: 0.05em;
            color: transparent; white-space: pre-wrap;
            opacity: 0; transition: opacity 0.5s ease-in-out;
        }
        @media (min-width: 768px) { .line { font-size: 4rem; } }
        
        .line-fg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            color: white; overflow: hidden;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 25px rgba(255, 255, 255, 0.5);
            clip-path: inset(0 50% 0 50%);
            animation: reveal-from-center 1.5s cubic-bezier(0.7, 0, 0.3, 1) forwards, fade-glow-white 1.5s linear forwards;
        }
        @keyframes reveal-from-center {
            from { clip-path: inset(0 50% 0 50%); }
            to { clip-path: inset(0 0 0 0); }
        }
        @keyframes fade-glow-white {
            0%, 50% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 25px rgba(255, 255, 255, 0.5); }
            100% { text-shadow: none; }
        }

        /* --- Modal & Text --- */
        #story-modal-backdrop { transition: opacity 0.3s ease-in-out; }
        #story-modal-content {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            border-top: 4px solid transparent;
        }
        
        /* Fixed Line Breaking & Animation */
        #story-modal-text {
            white-space: pre-line; /* Respects paragraphs but wraps text */
            word-wrap: break-word; /* Prevents long words from overflowing */
            line-height: 1.8;
        }
        #story-modal-text span {
            display: inline; /* Changed from inline-block to fix word breaking */
            opacity: 0;
            transition: opacity 0.3s ease; /* Faster transition */
        }
        #story-modal-text span.visible { opacity: 1; }

        /* --- Artist Logo Animation --- */
        #artist::before {
            content: ''; position: absolute; top: 10%; left: 10%;
            width: 80%; height: 80%;
            background-image: url('img/logo.png');
            background-repeat: no-repeat;
            background-position: center center;
            background-size: contain;
            opacity: 0.12; z-index: 0;
            animation: logo-float 15s ease-in-out infinite;
        }
        @keyframes logo-float {
            0%, 100% { transform: translateY(0px) rotate(-2deg); }
            50% { transform: translateY(-30px) rotate(2deg); }
        }

        /* --- Image Dragging --- */
        #story-modal-img { transition: none; }
        #story-modal-img-container.is-panning { cursor: grabbing; }
        
        .drag-indicator {
            position: absolute; top: 1.25rem; right: 1.25rem;
            color: rgba(255, 255, 255, 0.7);
            font-family: 'Righteous', cursive;
            text-align: right; pointer-events: none; z-index: 10;
            text-shadow: 0 0 10px rgba(0, 0, 0, 0.9);
            opacity: 0; animation: fadeInIndicator 0.5s 0.5s forwards;
        }
        .drag-indicator .main-text { font-size: 1.5rem; line-height: 1; }
        .drag-indicator .sub-text { font-size: 1rem; line-height: 1; display: block; opacity: 0.6; }
        @keyframes fadeInIndicator { to { opacity: 0.8; } }

        /* --- Lenis Scroll --- */
        html.lenis { height: auto; }
        .lenis.lenis-smooth { scroll-behavior: auto; }
        .lenis.lenis-smooth [data-lenis-prevent] { overscroll-behavior: contain; }
        .lenis.lenis-stopped { overflow: hidden; }
    </style>
</head>
<body class="overflow-x-hidden">

    <div id="story-modal-backdrop" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden opacity-0 p-4">
        <div id="story-modal-content" class="glass-effect rounded-lg max-w-4xl w-full transform scale-95 opacity-0 flex flex-col md:flex-row md:h-[85vh] max-h-[85vh] overflow-y-auto md:overflow-y-hidden">
            <div id="story-modal-img-container" class="md:w-1/2 cursor-grab relative h-64 md:h-auto flex-shrink-0">
                <img id="story-modal-img" src="" alt="Artwork Story" class="w-full h-full object-cover">
            </div>
            <div class="md:w-1/2 p-6 md:p-8 flex flex-col">
                <h3 id="story-modal-title" class="font-righteous text-2xl md:text-3xl mb-4 text-white"></h3>
                <div id="story-text-container" class="overflow-y-auto pr-2 flex-grow">
                    <p id="story-modal-text" class="text-gray-300 text-base md:text-lg"></p>
                </div>
                <button id="story-modal-close" class="mt-6 bg-purple-600 text-white font-bold font-righteous py-2 px-5 rounded-full hover:bg-purple-700 transition-colors self-start">Close</button>
            </div>
        </div>
    </div>

    <header class="fixed top-0 left-0 right-0 z-40 glass-effect">
        <nav class="container mx-auto px-4 sm:px-6 py-2 flex justify-between items-center">
            <a href="#hero" class="header-logo-link">
                <img src="img/logo.png" alt="RA Logo" class="h-16 w-auto">
            </a>
            <div class="flex items-center space-x-4 sm:space-x-6">
                <a href="#store" class="text-white font-semibold nav-link text-sm sm:text-base">Store</a>
                <a href="#artist" class="text-white font-semibold nav-link text-sm sm:text-base">The Artist</a>
                <a href="#contact" class="bg-white text-black font-bold font-righteous py-2 px-3 sm:px-5 rounded-full hover:bg-opacity-80 transition-colors text-sm sm:text-base">Contact</a>
            </div>
        </nav>
    </header>

    <main>
        <section id="hero" class="h-screen flex items-center justify-center relative overflow-hidden hero-section">
            <canvas id="hero-canvas" class="section-canvas" data-animation-type="hero"></canvas>
            <div class="container mx-auto px-6 relative z-10">
                <div id="animation-container" class="animation-container"></div>
            </div>
        </section>

        <section id="store" class="py-20 md:py-32 content-section">
            <div class="container mx-auto px-6">
                <h2 class="font-righteous text-4xl md:text-6xl text-center mb-16 scroll-reveal">The Collection</h2>
                <div id="store-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-12"></div>
            </div>
        </section>

        <section id="artist" class="py-20 md:py-32 content-section">
            <div class="container mx-auto px-6">
                <div class="glass-effect rounded-2xl p-8 lg:p-12 border border-purple-500/20">
                    <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 lg:gap-12 items-center">
                        <div class="lg:col-span-3 space-y-6">
                            <h2 class="font-righteous text-4xl md:text-5xl scroll-reveal">About the Artist</h2>
                            <div class="space-y-4 text-lg leading-relaxed scroll-reveal" style="transition-delay: 100ms;">
                                <p>I am a multidisciplinary digital creator specializing in advanced image manipulation to build artistic, futuristic, and surreal visions.</p>
                                <p>Through handmade illustrations, I master lighting and effects to transform creative ideas into unique hobbyist assets.<br><br><b>This website is also my idea and my design, I developed it myself.</b></p>
                            </div>
                            <div class="scroll-reveal" style="transition-delay: 200ms;">
                                <h3 class="font-righteous text-2xl mb-4" style="color: var(--accent-magenta);">Areas of Mastery</h3>
                                <ul class="grid grid-cols-1 sm:grid-cols-2 gap-4 text-base">
                                     <li class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="color: var(--accent-magenta);"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.486H7.343v-2.343z" /></svg>NULL 1</li>
                                    <li class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="color: var(--accent-magenta);"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2h-2.343M5 17h-2.343M2 2v20h20V2z" /></svg>NULL 2</li>
                                    <li class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="color: var(--accent-magenta);"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" /></svg>NULL 3</li>
                                    <li class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" style="color: var(--accent-magenta);"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.536l12.232-12.232z" /></svg>NULL 4</li>
                                </ul>
                            </div>
                        </div>
                        <div class="lg:col-span-2 flex items-center justify-center scroll-reveal" style="transition-delay: 300ms;">
                             <img src="img/X.jpg" alt="A photo of the artist" class="w-full h-auto max-w-sm lg:max-w-md object-cover rounded-2xl border-2 border-purple-500/50 shadow-2xl">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="py-20 md:py-32 content-section">
            <canvas class="section-canvas" data-animation-type="raining-lines"></canvas>
            <div class="container mx-auto px-6">
                <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-16 items-center">
                    <div class="text-center md:text-left flex flex-col justify-center">
                        <h2 class="font-righteous text-4xl md:text-6xl scroll-reveal">Begin Your <span style="color: var(--accent-magenta);">Legacy Project</span></h2>
                        <p class="mt-4 text-lg max-w-xl mx-auto md:mx-0 scroll-reveal" style="transition-delay: 100ms;">Ready to create something extraordinary? Let's discuss your vision.</p>
                        <div class="mt-10 scroll-reveal" style="transition-delay: 200ms;">
                            <a href="https://wa.link/15nuof" class="glowing-button inline-block text-white font-bold font-righteous text-lg py-4 px-10 rounded-full hover:opacity-90 transition-opacity duration-300">Contact Me</a>
                        </div>
                        <div class="mt-12 flex justify-center md:justify-start items-center space-x-8 scroll-reveal" style="transition-delay: 300ms;">
                            <a href="mailto:ranthuls112@gmail.com" target="_blank" class="text-white hover:opacity-80 transition-opacity">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                            </a>
                            <a href="https://web.facebook.com/Ranthula.senmith/" target="_blank" class="text-white hover:opacity-80 transition-opacity"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M14 13.5h2.5l1-4H14v-2c0-1.03 0-2 2-2h1.5V2.14c-.326-.043-1.557-.14-2.857-.14C11.928 2 10 3.657 10 6.7v2.8H7v4h3V22h4v-8.5z"/></svg></a>
                            <a href="https://www.instagram.com/_razor_s?fbclid=IwY2xjawMaCRZleHRuA2FlbQIxMABicmlkETFRUkVqRHlZMUhDbzh2NmI5AR61bqkvDRnI92VgBuFEde_FxiHZEzIFtblxIbNTWqLc7YcFPiRb9SYEGCjHFg_aem_FqDygwmLqVJBNGlj2heU6Q" target="_blank" class="text-white hover:opacity-80 transition-opacity"><svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849s-.012 3.584-.069 4.849c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.849-.07c-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849s.013-3.583.07-4.849c.149-3.227 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163m0-2.163C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.668-.014 4.948-.072c4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947c-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"/></svg></a>
                        </div>
                    </div>
                    <div class="flex items-start justify-center scroll-reveal">
                        <div id="contact-image-container" class="contact-image-container relative w-64 h-64 md:w-80 md:h-80 lg:w-96 lg:h-96 rounded-full">
                            <img id="contact-image" src="img/Z.jpg" alt="Contact image of the artist" class="w-full h-full rounded-full object-cover">
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer style="background-color: #1E1E1E;" class="py-8 content-section">
        <div class="container mx-auto px-6 text-center text-gray-400">
            <p>&copy; 2025 Ranthula Amarasekara. All Rights Reserved.</p>
        </div>
    </footer>

    <script>document.addEventListener('contextmenu', event => event.preventDefault());</script>

    <script src="https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1.0.23/bundled/lenis.min.js"></script>
    <script>
        const lenis = new Lenis({
          duration: 1.2,
          easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
          direction: 'vertical',
          smooth: true,
          touchMultiplier: 2,
        });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);
        
        document.querySelectorAll('a[href^="#"]').forEach(link => {
          link.addEventListener('click', (e) => {
            e.preventDefault();
            const target = document.querySelector(link.getAttribute('href'));
            if(target) lenis.scrollTo(target, { offset: 0, duration: 1.2 });
          });
        });
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Canvas Animation Logic ---
            class AnimationRunner {
                constructor(canvas) {
                    this.canvas = canvas;
                    this.ctx = canvas.getContext('2d');
                    this.animationType = canvas.dataset.animationType;
                    this.elements = [];
                    this.animationFrameId = null;
                    this.resize();
                    this.init();
                    window.addEventListener('resize', () => this.resize());
                }
                resize() {
                    const parent = this.canvas.parentElement;
                    this.canvas.width = parent.clientWidth;
                    this.canvas.height = parent.clientHeight;
                    this.init();
                }
                init() {
                    this.elements = [];
                    let numElements;
                    const isMobile = window.innerWidth < 768;
                    switch (this.animationType) {
                        case 'hero':
                            numElements = isMobile ? 25 : 50;
                            for (let i = 0; i < numElements; i++) this.elements.push(new HeroLine(this.canvas));
                            break;
                        case 'raining-lines':
                            numElements = isMobile ? 40 : 80;
                            for (let i = 0; i < numElements; i++) this.elements.push(new RainingLine(this.canvas));
                            break;
                    }
                }
                animate() {
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                    this.elements.forEach(el => { el.draw(this.ctx); el.update(); });
                    this.animationFrameId = requestAnimationFrame(() => this.animate());
                }
                start() { if (!this.animationFrameId) this.animate(); }
                stop() { if (this.animationFrameId) { cancelAnimationFrame(this.animationFrameId); this.animationFrameId = null; } }
            }

            // Classes for Canvas Shapes
            class HeroLine { constructor(canvas) { this.canvas = canvas; this.reset(); } draw(c) { c.strokeStyle = this.color; c.lineWidth = this.lineWidth; c.beginPath(); c.moveTo(this.history[0].x, this.history[0].y); for (const p of this.history) c.lineTo(p.x, p.y); c.stroke(); } update() { this.timer++; if (this.timer < this.life) { this.x += this.speedX + Math.sin(this.timer * 0.02) * 0.8; this.y += this.speedY + Math.cos(this.timer * 0.02) * 0.8; this.history.push({ x: this.x, y: this.y }); if (this.history.length > this.maxLength) this.history.shift(); } else if (this.history.length > 1) { this.history.shift(); } else { this.reset(); } } reset() { this.x = Math.random() * this.canvas.width; this.y = Math.random() * this.canvas.height; this.history = [{ x: this.x, y: this.y }]; this.lineWidth = Math.random() * 3.5 + 1.5; this.maxLength = Math.floor(Math.random() * 300 + 200); this.speedX = Math.random() * 2 - 1; this.speedY = Math.random() * 2 - 1; this.life = this.maxLength * 2; this.timer = 0; this.color = `rgba(255, 255, 255, ${Math.random() * 0.3 + 0.15})`; } }
            class RainingLine { constructor(c) { this.c = c; this.x = Math.random() * c.width; this.y = Math.random() * c.height; this.l = Math.random() * 25 + 15; this.speed = Math.random() * 1.5 + 0.5; this.color = `rgba(255,255,255,${Math.random() * 0.25 + 0.1})`; } draw(x) { x.strokeStyle = this.color; x.lineWidth = 1; x.beginPath(); x.moveTo(this.x, this.y); x.lineTo(this.x, this.y + this.l); x.stroke(); } update() { this.y += this.speed; if (this.y > this.c.height) { this.y = 0 - this.l; this.x = Math.random() * this.c.width; } } }

            // --- Hero Text Cycle ---
            const container = document.getElementById('animation-container');
            const heroCanvas = document.getElementById('hero-canvas');
            const sentences = [["Hi!", "I'm Ranthula"], ["Bring your ideas", "to life with", "vivid visuals!"]];
            let sentenceIndex = 0, heroAnimationRunner = null;

            async function runAnimationCycle() { 
                container.style.opacity = '1'; 
                const currentSentenceLines = sentences[sentenceIndex]; 
                const createdLineElements = []; 
                
                if (sentenceIndex === 0) { 
                    document.documentElement.style.setProperty('--gradient-opacity', '0.3'); 
                    if (heroCanvas) heroCanvas.style.opacity = '0'; 
                    if (heroAnimationRunner) heroAnimationRunner.stop(); 
                } else if (sentenceIndex === 1) { 
                    if (heroAnimationRunner) heroAnimationRunner.start(); 
                    if (heroCanvas) heroCanvas.style.opacity = '1'; 
                    setTimeout(() => document.documentElement.style.setProperty('--gradient-opacity', '1'), 100); 
                } 
                
                for (const lineText of currentSentenceLines) { 
                    const lineDiv = document.createElement('div'); 
                    lineDiv.className = 'line'; lineDiv.textContent = lineText; 
                    const lineFgDiv = document.createElement('div'); 
                    lineFgDiv.className = 'line-fg'; lineFgDiv.textContent = lineText; 
                    lineDiv.appendChild(lineFgDiv); container.appendChild(lineDiv); 
                    createdLineElements.push(lineDiv); 
                    await new Promise(resolve => setTimeout(resolve, 50)); 
                    lineDiv.style.opacity = '1'; 
                    await new Promise(resolve => setTimeout(resolve, 800)); 
                } 
                
                const pauseDuration = sentenceIndex === 1 ? 9000 : 2000; 
                await new Promise(resolve => setTimeout(resolve, pauseDuration)); 
                for (const el of createdLineElements) { el.style.opacity = '0'; } 
                await new Promise(resolve => setTimeout(resolve, 500)); 
                container.innerHTML = ''; 
                sentenceIndex = (sentenceIndex + 1) % sentences.length; 
                runAnimationCycle(); 
            }

            // --- Product Data & Logic ---
            const portfolioData = [
                // --- Existing Products (art1 - art6) ---
                { id: 'art1', title: "Wukong's Stand", description: 'A mythical warrior stands against a rising sun, embodying power and legend.', imageUrl: 'img/01.jpg', story: "From the time I was a child, the enchanting tales of the Monkey King fascinated me. His daring adventures and formidable powers sparked my imagination like nothing else.\n\nI have always yearned to capture that fleeting moment just before chaos unfurls—a hero standing tall, gripping a magical staff, with a sky painted in vibrant hues of orange and purple, hinting at the impending storm of battle. This artwork is my heartfelt tribute to that exhilarating sensation of boundless strength and potential, where the air is thick with anticipation and anything feels possible.", colors: ['rgb(210, 100, 0)', 'rgb(255, 190, 80)'] },
                { id: 'art2', title: 'Golden Rivalry', description: "Anticipation builds for the 'Battle of Gold and Yellow'...", imageUrl: 'img/02.jpg', story: "Sometimes, conflict isn't dark; it's brilliant. This piece explores the clash of Titans, represented by the richness of gold and the intensity of deep yellow.\n\nIt is a visual representation of rivalry at its peak, where two powerful forces meet. I wanted the viewer to feel the heat and the value of what is being fought for.", colors: ['rgb(140, 20, 20)', 'rgb(255, 190, 40)'] },
                { id: 'art3', title: 'Lewis Hamilton', description: 'GOAT of Formula 1', imageUrl: 'img/07.jpg', story: "Lewis Hamilton is one of the most successful drivers in Formula 1 history, holding multiple world championships and numerous records. Known for his skill, speed, and consistency, he has transformed the sport with his talent and dedication. This artwork created for him, he is my favorite F1 driver.", colors: ['rgb(131, 3, 3)', 'rgb(251, 64, 64)'] },
                { id: 'art4', title: "Ceylon's Finest", description: 'Vibrant product promotion capturing the fresh, natural essence of local cashews.', imageUrl: 'img/04.jpg', story: "How do you make something taste as good as it looks? That was my goal here. I wanted to create an image that felt fresh, natural, and authentically Sri Lankan.\n\nIt’s more than just a product; it’s a piece of home, made to look as delicious as it truly is.", colors: ['rgb(80, 130, 40)', 'rgb(160, 210, 90)'] },
                { id: 'art5', title: 'Grand Opening', description: 'A dynamic and smoky announcement, celebrating a new beginning with flavor.', imageUrl: 'img/05.jpg', story: "A new restaurant isn't just a place to eat; it's a dream coming true. I wanted to create an image that felt fresh, natural, and authentically Sri Lankan.\n\nThis design is all about building anticipation and making you feel the energy and flavor before you even walk through the door.", colors: ['rgb(135, 56, 3)', 'rgb(255, 160, 80)'] },
                { id: 'art6', title: 'The Wings', description: 'An artwork created for real customer', imageUrl: 'img/06.jpg', story: "I created this artwork for a customer who requested it, successfully turning his idea into a visual representation.", colors: ['rgb(131, 3, 3)', 'rgb(251, 64, 64)'] },

                // --- New Products (art7 - art13) ---
                { 
                    id: 'art7', 
                    title: 'Stormy Pitch', 
                    description: 'A lone figure on a desolate pitch under a stormy sky...', 
                    imageUrl: 'img/03.jpg', 
                    story: "Every athlete knows this feeling: standing alone against a huge challenge. The world is loud, the pressure is on, but in your head, it's completely silent.\n\nThis piece is about finding that calm in the middle of the storm and facing what's coming with quiet strength.", 
                    colors: ['rgb(85, 75, 70)', 'rgb(255, 245, 200)']
                },
                { 
                    id: 'art8', 
                    title: 'Paris Olympic', 
                    description: 'Lions for Gold', 
                    imageUrl: 'img/08.jpg', 
                    story: "I created this artwork for a customer who requested it, successfully turning his idea into a visual representation.", 
                    colors: ['rgb(28, 8, 57)', 'rgb(135, 52, 255)'] // Dark Red to Pink
                },
                { 
                    id: 'art9', 
                    title: 'Happy New Year', 
                    description: 'Art for Avurudu Festival', 
                    imageUrl: 'img/09.jpg', 
                    story: "This art work created for customer who requested a new year greeting", 
                    colors: ['rgb(135, 16, 8)', 'rgb(248, 86, 1)'] // Dark Grey to Blue-Grey
                },
                { 
                    id: 'art10', 
                    title: 'Pharaoh Fury', 
                    description: 'The gaming manipulation', 
                    imageUrl: 'img/10.jpg', 
                    story: "This art work created for a gamer who want to use a unique avatar for him,So I created this for him", 
                    colors: ['rgb(255, 80, 0)', 'rgb(255, 200, 0)'] // Orange to Yellow
                },
                { 
                    id: 'art11', 
                    title: 'Parade for Bigmatch', 
                    description: 'Big match seson arts', 
                    imageUrl: 'img/14.jpeg', 
                    story: "I created this artwork for local school who requested a parede post from me and I make that post for them", 
                    colors: ['rgb(210, 100, 0)', 'rgb(255, 190, 80)']
                },
                { 
                    id: 'art12', 
                    title: 'Premium Cashews', 
                    description: 'Flavors of cashews', 
                    imageUrl: 'img/12.jpg', 
                    story: "How do you make something taste as good as it looks? That was my goal here. I wanted to create an image that felt fresh, natural, and authentically Sri Lankan.\n\nIt’s more than just a product; it’s a piece of home, made to look as delicious as it truly is.", 
                    colors: ['rgb(131, 3, 3)', 'rgb(251, 64, 64)']
                },
                { 
                    id: 'art13', 
                    title: 'The Jungle', 
                    description: 'The imagination', 
                    imageUrl: 'img/13.jpg', 
                    story: "This art is not for anyone, I created this artwork for me myself and It's for fun", 
                    colors: ['rgb(36, 73, 3)', 'rgb(204, 255, 0)'] // Teal to Aqua
                }
            ];

            const storeGrid = document.getElementById('store-grid');
            const storyModalBackdrop = document.getElementById('story-modal-backdrop');
            const storyModalContent = document.getElementById('story-modal-content');
            const storyModalImg = document.getElementById('story-modal-img');
            const storyModalTitle = document.getElementById('story-modal-title');
            const storyModalText = document.getElementById('story-modal-text');
            const storyModalClose = document.getElementById('story-modal-close');
            const storyModalImgContainer = document.getElementById('story-modal-img-container');
            let storyAnimationTimeouts = [];

            // Generate Cards
            portfolioData.forEach((item, index) => {
                storeGrid.innerHTML += `
                <div class="product-card-container scroll-reveal" style="transition-delay: ${index * 100}ms;">
                    <div class="product-card rounded-lg overflow-hidden flex flex-col h-full" data-glow-id="${item.id}" data-item-id="${item.id}">
                        <div class="product-image-wrapper w-full overflow-hidden cursor-pointer" data-src="${item.imageUrl}">
                           <img src="${item.imageUrl}" onerror="this.src='https://placehold.co/600x600/121212/E0E0E0?text=No+Image';" alt="${item.title}" class="w-full h-full object-cover transform hover:scale-110 transition-transform duration-500 ease-in-out">
                        </div>
                        <div class="p-6 flex-grow flex flex-col">
                            <h3 class="font-righteous text-2xl mb-2">${item.title}</h3>
                            <p class="text-gray-400 text-sm mb-4 flex-grow">${item.description}</p>
                            <button class="story-button mt-auto w-full text-white font-bold font-righteous py-2 px-4 rounded-full hover:opacity-90 transition-opacity" data-glow-id="${item.id}">Story of the Art</button>
                        </div>
                    </div>
                </div>`;
            });

            // Dynamic Styles
            let allRules = '';
            portfolioData.forEach(item => {
                if(item.colors){
                    const [c1, c2] = item.colors;
                    allRules += `
                    .product-card[data-glow-id="${item.id}"] .product-image-wrapper { background: linear-gradient(135deg, ${c1}, ${c2}); }
                    .story-button[data-glow-id="${item.id}"] { background: linear-gradient(90deg, ${c1}, ${c2}); animation: glow-${item.id} 2.5s ease-in-out infinite; }
                    .product-card[data-glow-id="${item.id}"]:hover { box-shadow: 0 30px 60px rgba(0,0,0,0.4), 0 0 40px ${c1}; }
                    @keyframes glow-${item.id} { 0%,100% { box-shadow: 0 0 8px ${c2}, 0 0 20px ${c1}; } 50% { box-shadow: 0 0 16px ${c2}, 0 0 40px ${c1}; } }`;
                }
            });
            const styleElement = document.createElement("style");
            styleElement.innerHTML = allRules;
            document.head.appendChild(styleElement);

            // 3D Card Effect
            document.querySelectorAll('.product-card-container').forEach(container => {
                const card = container.querySelector('.product-card');
                container.addEventListener('mousemove', (e) => {
                    const rect = container.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    card.style.transform = `rotateX(${(y/rect.height-0.5)*-15}deg) rotateY(${(x/rect.width-0.5)*15}deg)`;
                });
                container.addEventListener('mouseleave', () => card.style.transform = 'rotateX(0) rotateY(0)');
            });

            // --- Modal Logic ---
            function openStoryModal(item) {
                storyModalTitle.textContent = `The Story Behind "${item.title}"`;
                storyModalText.innerHTML = '';
                storyModalImg.src = item.imageUrl;
                storyModalContent.style.borderColor = item.colors[0] || 'var(--accent-purple)';
                
                const indicator = document.createElement('div');
                indicator.className = 'drag-indicator';
                indicator.innerHTML = '<span class="sub-text">Drag To</span><span class="main-text">Explore</span>';
                storyModalImgContainer.appendChild(indicator);
                
                storyModalImg.style.objectPosition = 'center center';
                storyModalBackdrop.classList.remove('hidden');
                setTimeout(() => {
                    storyModalBackdrop.classList.remove('opacity-0');
                    storyModalContent.classList.remove('opacity-0', 'scale-95');
                    animateStoryText(item.story);
                    setupPanningListeners();
                }, 10);
            }

            function closeStoryModal() {
                const indicator = storyModalImgContainer.querySelector('.drag-indicator');
                if (indicator) indicator.remove();
                removePanningListeners();
                storyAnimationTimeouts.forEach(clearTimeout);
                storyAnimationTimeouts = [];
                storyModalContent.classList.add('opacity-0', 'scale-95');
                storyModalBackdrop.classList.add('opacity-0');
                setTimeout(() => storyModalBackdrop.classList.add('hidden'), 300);
            }
            
            function animateStoryText(text) {
                storyModalText.innerHTML = '';
                const characters = text.split('');
                characters.forEach((char, index) => {
                    const span = document.createElement('span');
                    span.textContent = char; // Using textContent preserves whitespace handled by CSS
                    storyModalText.appendChild(span);
                    // SPEED FIX: Reduced delay from 20 to 5ms for faster reading
                    const timeoutId = setTimeout(() => span.classList.add('visible'), index * 13);
                    storyAnimationTimeouts.push(timeoutId);
                });
            }

            // Event Listeners
            storeGrid.addEventListener('click', (e) => {
                const target = e.target.closest('.story-button, .product-image-wrapper');
                if (target) {
                    const card = target.closest('.product-card');
                    const item = portfolioData.find(i => i.id === card.dataset.itemId);
                    if (item) openStoryModal(item);
                }
            });
            storyModalClose.addEventListener('click', closeStoryModal);
            storyModalBackdrop.addEventListener('click', (e) => { if (e.target === storyModalBackdrop) closeStoryModal(); });

            // Image Panning
            let isPanning=false, startX, startY, startObjectX, startObjectY;
            function getPos(el) { const p = window.getComputedStyle(el).objectPosition.split(' ').map(parseFloat); return {x:p[0]||50, y:p[1]||50}; }
            function onPanStart(e) {
                if (Math.abs((storyModalImg.naturalWidth/storyModalImg.naturalHeight)-(storyModalImg.clientWidth/storyModalImg.clientHeight))<=0.02) return;
                e.preventDefault(); isPanning=true; storyModalImgContainer.classList.add('is-panning');
                const t = e.touches?e.touches[0]:e; startX=t.clientX; startY=t.clientY;
                const pos = getPos(storyModalImg); startObjectX=pos.x; startObjectY=pos.y;
            }
            function onPanMove(e) {
                if(!isPanning) return; e.preventDefault();
                const t = e.touches?e.touches[0]:e;
                let nx = startObjectX - ((t.clientX-startX)*0.2);
                let ny = startObjectY - ((t.clientY-startY)*0.2);
                storyModalImg.style.objectPosition = `${Math.max(0,Math.min(100,nx))}% ${Math.max(0,Math.min(100,ny))}%`;
            }
            function onPanEnd() { isPanning=false; storyModalImgContainer.classList.remove('is-panning'); }
            function setupPanningListeners() {
                storyModalImgContainer.addEventListener('mousedown', onPanStart); window.addEventListener('mousemove', onPanMove); window.addEventListener('mouseup', onPanEnd);
                storyModalImgContainer.addEventListener('touchstart', onPanStart, {passive:false}); window.addEventListener('touchmove', onPanMove, {passive:false}); window.addEventListener('touchend', onPanEnd);
            }
            function removePanningListeners() {
                storyModalImgContainer.removeEventListener('mousedown', onPanStart); window.removeEventListener('mousemove', onPanMove); window.removeEventListener('mouseup', onPanEnd);
                storyModalImgContainer.removeEventListener('touchstart', onPanStart); window.removeEventListener('touchmove', onPanMove); window.removeEventListener('touchend', onPanEnd);
            }

            // Init Animations
            document.querySelectorAll('.section-canvas').forEach(c => {
                const runner = new AnimationRunner(c);
                if (c.id === 'hero-canvas') heroAnimationRunner = runner;
                else runner.start();
            });
            document.fonts.ready.then(runAnimationCycle);
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(e => { if(e.isIntersecting) { e.target.classList.add('is-visible'); observer.unobserve(e.target); } });
            }, {threshold: 0.1});
            document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));
            
            // 3D Effect for Contact Image
            const contactImg = document.getElementById('contact-image-container');
            if(contactImg) {
                contactImg.addEventListener('mousemove', e => {
                    const rect = contactImg.getBoundingClientRect();
                    contactImg.style.transform = `rotateX(${(e.clientY-rect.top-rect.height/2)/-10}deg) rotateY(${(e.clientX-rect.left-rect.width/2)/10}deg) scale(1.05)`;
                });
                contactImg.addEventListener('mouseleave', () => { contactImg.style.transform = ''; });
            }
        });
    </script>
</body>
</html>
